<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Modal</title>
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous">
  <link rel="stylesheet" href="modal.css">
  <script src="modal.js"></script>

  <style>
    body {
      height: 1500px;
    }
    #in-container {
      position: relative;
      height: 500px;
      overflow-y: scroll;
    }
  </style>
</head>
<body>
  <main class="container">
    <button id="open" type="button" class="btn btn-default">open</button>
  </main>

  <div id="content" class="modal-content">
    <div class="modal-header">
      <button type="button" class="close" modal-dismiss="cancel">&times;</button>
      <h4 class="modal-title">Modal title</h4>
    </div>
    <div class="modal-body">
      <p>One fine body&hellip;</p>
    </div>
    <div class="modal-footer">
      <button type="button" class="btn btn-default" modal-dismiss="cancel">Close</button>
      <button type="button" class="btn btn-primary" modal-close="OK">OK</button>
    </div>
  </div>

  <script>
    var content = document.getElementById("content");
    var fragment = document.createDocumentFragment();
    fragment.appendChild(content);

    var modal = new Modal({
      content: fragment,
      onOpen: function () {
        // Alternative A:
        bindEventListener(this.dialog);
      },
      onClose: function () {
        alert(arguments[0]);
        return false;
      }
    });

    document.getElementById("open")
      .addEventListener("click", function () {
        modal.open();

        // Alternative B:
        // bindEventListener(modal.dialog);
      });

    /* Utility methods */
    function bindEventListener (content) {
      content.querySelectorAll("[modal-dismiss]").forEach(function (el, i) {
        el.addEventListener("click", function () {
          modal.close("Dismissed!");
        });
      });

      content.querySelectorAll("[modal-close]").forEach(function (el, i) {
        el.addEventListener("click", function () {
          modal.close("Okay ;-)");
        });
      });
    }
  </script>
</body>
</html>
